<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Retrieve publication metadata from CrossRef — get_pubs • pubclassify</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve publication metadata from CrossRef — get_pubs"><meta name="description" content="Fetches publication metadata from the CrossRef API using either a search query,
filters, or a list of Digital Object Identifiers (DOIs). The function handles
pagination for search queries and processes DOIs individually to track
successes and failures."><meta property="og:description" content="Fetches publication metadata from the CrossRef API using either a search query,
filters, or a list of Digital Object Identifiers (DOIs). The function handles
pagination for search queries and processes DOIs individually to track
successes and failures."><style>
  /* base font size - slightly larger than 10pt */
  :root {
    font-size: 1rem;
  }

  /* Larger heading sizes for better proportion */
  h1 { font-size: 2.1rem; }
  h2 { font-size: 1.7rem; }
  h3 { font-size: 1.5rem; }
  h4 { font-size: 1.25rem; }

  /* Make main page title bigger and bold */
  .template-home .page-header h1 {
    font-size: 3.2rem;
    font-weight: 700;
  }

  /* Make function page titles bigger and bold */
  .template-reference-topic .page-header h1 {
    font-size: 2.5rem;
    font-weight: 700;
  }

  /* Make vignette titles bigger and bold */
  .template-article .page-header h1 {
    font-size: 2.8rem;
    font-weight: 700;
  }

  /* body text */
  p, li, td, th { font-size: 1rem; }

  /* Make code blocks smaller */
  pre, pre code, .sourceCode { font-size: 0.85rem; }
  code { font-size: 0.9rem; }

  /* other elements */
  .navbar { font-size: 1rem; }
  .nav-pills .nav-link { font-size: 1rem; }
  .ref-index .ref-description { font-size: 1rem; }
  footer { font-size: 1rem; }

  /* column width adjustments */
  @media (min-width: 992px) {
    /* make main content width a bit smaller to allow sidebar to be wider */
    .col-md-9 {
      flex: 0 0 auto;
      width: 85%;
    }

    /* make sidebar wider */
    .col-md-3 {
      flex: 0 0 auto;
      width: 15%;
    }

    /* for reference pages with larger layout */
    .row > .col-xl-8 {
      flex: 0 0 auto;
      width: 85%;
    }

    .row > .col-xl-4 {
      flex: 0 0 auto;
      width: 15%;
    }
  }

  /* Improve sidebar text display */
  .sidebar .list-unstyled li {
    white-space: nowrap;  /* Prevent text wrapping in sidebar links */
    overflow: visible;    /* Allow text to be fully visible */
  }

  /* Make sure citation links don't wrap */
  .sidebar h2 {
    white-space: nowrap;
    overflow: visible;
  }

  /* Fix dropdown menu styling */
  .dropdown-menu {
    background-color: #e2e6ea !important; /* Medium-light gray background - darker than before */
    border: 1px solid rgba(0,0,0,0.15);   /* Add a subtle border */
  }

  .dropdown-item, .dropdown-menu a {
    color: #212529 !important; /* Dark text color (almost black) */
  }

  .dropdown-item:hover, .dropdown-menu a:hover {
    background-color: #cbd3da !important; /* Darker gray on hover */
    color: #000 !important; /* Black text on hover */
  }

  /* Ensure active items are also readable */
  .dropdown-item.active, .dropdown-item:active {
    background-color: #0B2545 !important; /* Your primary color */
    color: white !important;
  }
</style></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pubclassify</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/classify_dwr_pubs.html">DWR Publication Classification using an LLM</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lucy-dwr/pubclassify/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Retrieve publication metadata from CrossRef</h1>
      <small class="dont-index">Source: <a href="https://github.com/lucy-dwr/pubclassify/blob/HEAD/R/get_pubs.R" class="external-link"><code>R/get_pubs.R</code></a></small>
      <div class="d-none name"><code>get_pubs.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Fetches publication metadata from the CrossRef API using either a search query,
filters, or a list of Digital Object Identifiers (DOIs). The function handles
pagination for search queries and processes DOIs individually to track
successes and failures.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_pubs</span><span class="op">(</span></span>
<span>  query <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dois <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  total <span class="op">=</span> <span class="fl">10000L</span>,</span>
<span>  per_page <span class="op">=</span> <span class="fl">1000L</span>,</span>
<span>  preserve_404 <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-query">query<a class="anchor" aria-label="anchor" href="#arg-query"></a></dt>
<dd><p>Character string containing a search query. This can be used to
search across multiple fields. Default is NULL.</p></dd>


<dt id="arg-filter">filter<a class="anchor" aria-label="anchor" href="#arg-filter"></a></dt>
<dd><p>Named character vector of filters to apply to the CrossRef query.
See <code><a href="https://docs.ropensci.org/rcrossref/reference/cr_works.html" class="external-link">cr_works</a></code> for available filter options.
Default is NULL.</p></dd>


<dt id="arg-dois">dois<a class="anchor" aria-label="anchor" href="#arg-dois"></a></dt>
<dd><p>Character vector of DOIs to retrieve. If provided, query and filter
parameters are ignored. Default is NULL.</p></dd>


<dt id="arg-total">total<a class="anchor" aria-label="anchor" href="#arg-total"></a></dt>
<dd><p>Integer specifying the maximum number of records to retrieve.
Default is 10000. The function will stop when this many records have been
fetched or when no more records are available.</p></dd>


<dt id="arg-per-page">per_page<a class="anchor" aria-label="anchor" href="#arg-per-page"></a></dt>
<dd><p>Integer specifying how many records to fetch per API call when
using query or filter mode. Must be between 1 and 1000. Default is 1000
(the maximum allowed by CrossRef).</p></dd>


<dt id="arg-preserve-">preserve_404<a class="anchor" aria-label="anchor" href="#arg-preserve-"></a></dt>
<dd><p>Logical indicating whether to include placeholder rows for
DOIs that could not be retrieved. If TRUE (default), the result will contain
one row for each input DOI, with NA values for those not found. If FALSE,
unfound DOIs will be omitted from the result.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame containing publication metadata from CrossRef. When
using DOI mode with preserve_404 = TRUE, the result will include:</p><ul><li><p>All standard CrossRef metadata fields</p></li>
<li><p>original_doi: The DOI as provided in the input</p></li>
<li><p>doi_retrieved: Logical indicating whether the DOI was successfully retrieved</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function provides two modes of operation:</p>
<ul><li><p>Search mode: when query or filter parameters are provided, the function
performs a search using the CrossRef API and handles pagination to retrieve
multiple pages of results.</p></li>
<li><p>DOI mode: when a list of DOIs is provided, the function retrieves
metadata for each DOI individually. This allows for precise tracking of
which DOIs were successfully retrieved.</p></li>
</ul><p>When using DOI mode, a small delay (0.1 seconds) is added between requests to
avoid overwhelming the CrossRef API.</p>
<p>For large DOI lists, the function displays progress messages every 10 DOIs.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://docs.ropensci.org/rcrossref/reference/cr_works.html" class="external-link">cr_works</a></code> for details on the underlying CrossRef API
function and available filter options.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="co"># search for publications by keyword</span></span></span>
<span class="r-in"><span><span class="va">climate_pubs</span> <span class="op">&lt;-</span> <span class="fu">get_pubs</span><span class="op">(</span>query <span class="op">=</span> <span class="st">"climate change"</span>, total <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># search with filters</span></span></span>
<span class="r-in"><span><span class="va">recent_ecology</span> <span class="op">&lt;-</span> <span class="fu">get_pubs</span><span class="op">(</span></span></span>
<span class="r-in"><span>  filter <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    from_pub_date <span class="op">=</span> <span class="st">"2022-01-01"</span>,</span></span>
<span class="r-in"><span>    container_title <span class="op">=</span> <span class="st">"ecology"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  total <span class="op">=</span> <span class="fl">100</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># retrieve specific publications by DOI</span></span></span>
<span class="r-in"><span><span class="va">my_dois</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"10.1038/s41586-019-1401-2"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"10.1126/science.aaf7671"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"10.1111/invalid-doi"</span>  <span class="co"># this DOI doesn't exist</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">my_pubs</span> <span class="op">&lt;-</span> <span class="fu">get_pubs</span><span class="op">(</span>dois <span class="op">=</span> <span class="va">my_dois</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># check which DOIs were not successfully retrieved</span></span></span>
<span class="r-in"><span><span class="va">my_pubs</span><span class="op">[</span><span class="va">my_pubs</span><span class="op">$</span><span class="va">doi_retrieved</span> <span class="op">==</span> <span class="cn">FALSE</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># get only successfully retrieved DOIs</span></span></span>
<span class="r-in"><span><span class="va">found_pubs</span> <span class="op">&lt;-</span> <span class="fu">get_pubs</span><span class="op">(</span>dois <span class="op">=</span> <span class="va">my_dois</span>, preserve_404 <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lucy Andrews.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

