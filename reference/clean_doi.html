<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Clean and standardize DOIs — clean_doi • pubclassify</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Clean and standardize DOIs — clean_doi"><meta name="description" content="Processes Digital Object Identifier (DOI) strings to extract and standardize
the DOI value by removing various prefixes, URL components, and extraneous
characters. This function helps normalize DOIs that may be presented in
different formats (URLs, citations, etc.) into a consistent standard form."><meta property="og:description" content="Processes Digital Object Identifier (DOI) strings to extract and standardize
the DOI value by removing various prefixes, URL components, and extraneous
characters. This function helps normalize DOIs that may be presented in
different formats (URLs, citations, etc.) into a consistent standard form."><style>
  /* base font size - slightly larger than 10pt */
  :root {
    font-size: 1rem;
  }

  /* Larger heading sizes for better proportion */
  h1 { font-size: 2.1rem; }
  h2 { font-size: 1.7rem; }
  h3 { font-size: 1.5rem; }
  h4 { font-size: 1.25rem; }

  /* Make main page title bigger and bold */
  .template-home .page-header h1 {
    font-size: 3.2rem;
    font-weight: 700;
  }

  /* Make function page titles bigger and bold */
  .template-reference-topic .page-header h1 {
    font-size: 2.5rem;
    font-weight: 700;
  }

  /* Make vignette titles bigger and bold */
  .template-article .page-header h1 {
    font-size: 2.8rem;
    font-weight: 700;
  }

  /* body text */
  p, li, td, th { font-size: 1rem; }

  /* Make code blocks smaller */
  pre, pre code, .sourceCode { font-size: 0.85rem; }
  code { font-size: 0.9rem; }

  /* other elements */
  .navbar { font-size: 1rem; }
  .nav-pills .nav-link { font-size: 1rem; }
  .ref-index .ref-description { font-size: 1rem; }
  footer { font-size: 1rem; }

  /* column width adjustments */
  @media (min-width: 992px) {
    /* make main content width a bit smaller to allow sidebar to be wider */
    .col-md-9 {
      flex: 0 0 auto;
      width: 85%;
    }

    /* make sidebar wider */
    .col-md-3 {
      flex: 0 0 auto;
      width: 15%;
    }

    /* for reference pages with larger layout */
    .row > .col-xl-8 {
      flex: 0 0 auto;
      width: 85%;
    }

    .row > .col-xl-4 {
      flex: 0 0 auto;
      width: 15%;
    }
  }

  /* Improve sidebar text display */
  .sidebar .list-unstyled li {
    white-space: nowrap;  /* Prevent text wrapping in sidebar links */
    overflow: visible;    /* Allow text to be fully visible */
  }

  /* Make sure citation links don't wrap */
  .sidebar h2 {
    white-space: nowrap;
    overflow: visible;
  }

  /* Fix dropdown menu styling */
  .dropdown-menu {
    background-color: #e2e6ea !important; /* Medium-light gray background - darker than before */
    border: 1px solid rgba(0,0,0,0.15);   /* Add a subtle border */
  }

  .dropdown-item, .dropdown-menu a {
    color: #212529 !important; /* Dark text color (almost black) */
  }

  .dropdown-item:hover, .dropdown-menu a:hover {
    background-color: #cbd3da !important; /* Darker gray on hover */
    color: #000 !important; /* Black text on hover */
  }

  /* Ensure active items are also readable */
  .dropdown-item.active, .dropdown-item:active {
    background-color: #0B2545 !important; /* Your primary color */
    color: white !important;
  }
</style></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">pubclassify</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/classify_dwr_pubs.html">DWR Publication Classification using an LLM</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/lucy-dwr/pubclassify/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Clean and standardize DOIs</h1>
      <small class="dont-index">Source: <a href="https://github.com/lucy-dwr/pubclassify/blob/HEAD/R/clean_doi.R" class="external-link"><code>R/clean_doi.R</code></a></small>
      <div class="d-none name"><code>clean_doi.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Processes Digital Object Identifier (DOI) strings to extract and standardize
the DOI value by removing various prefixes, URL components, and extraneous
characters. This function helps normalize DOIs that may be presented in
different formats (URLs, citations, etc.) into a consistent standard form.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">clean_doi</span><span class="op">(</span><span class="va">doi</span>, warn <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-doi">doi<a class="anchor" aria-label="anchor" href="#arg-doi"></a></dt>
<dd><p>A character vector containing DOI strings to be cleaned, or
NULL/NA values.</p></dd>


<dt id="arg-warn">warn<a class="anchor" aria-label="anchor" href="#arg-warn"></a></dt>
<dd><p>Logical. If TRUE, generate warnings for NULL or all-NA inputs.
Default is FALSE.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A character vector of the same length as the input, with cleaned DOI
values. Empty strings are converted to NA. If the input is NULL or all NA,
it is returned unchanged.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function performs the following cleaning operations:</p><ul><li><p>Removes leading and trailing whitespace</p></li>
<li><p>Removes quotation marks at the beginning and end</p></li>
<li><p>Removes URL prefixes like "http://doi.org/", "https://dx.doi.org/", etc.</p></li>
<li><p>Removes the "doi:" prefix (case insensitive)</p></li>
<li><p>Handles special cases like missing slashes after ".org"</p></li>
<li><p>Removes publisher-specific URL formats (e.g., "https://ascelibrary.org/doi/abs/")</p></li>
<li><p>Converts empty strings to NA</p></li>
</ul><p>If the input is not a character vector, it is returned unchanged.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># do a basic DOI cleaning</span></span></span>
<span class="r-in"><span><span class="fu">clean_doi</span><span class="op">(</span><span class="st">"10.1234/example.doi.123"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "10.1234/example.doi.123"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># clean DOIs with URL prefixes</span></span></span>
<span class="r-in"><span><span class="fu">clean_doi</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"https://doi.org/10.1234/example"</span>, <span class="st">"doi:10.5678/another.example"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "10.1234/example"         "10.5678/another.example"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># handle invalid inputs</span></span></span>
<span class="r-in"><span><span class="fu">clean_doi</span><span class="op">(</span><span class="st">""</span><span class="op">)</span>   <span class="co"># returns NA</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-in"><span><span class="fu">clean_doi</span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>   <span class="co"># returns NA</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] NA</span>
<span class="r-in"><span><span class="fu">clean_doi</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span> <span class="co"># returns NULL</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># enable warnings</span></span></span>
<span class="r-in"><span><span class="fu">clean_doi</span><span class="op">(</span><span class="cn">NULL</span>, warn <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># returns NULL with warning</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>NULL input provided to clean_doi()</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lucy Andrews.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

