% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/create_bibtex.R
\name{create_bibtex}
\alias{create_bibtex}
\title{Create BibTeX entry from publication data}
\usage{
create_bibtex(pub_row, key_prefix = "")
}
\arguments{
\item{pub_row}{A data frame row or list containing publication metadata.
Must include: doi, title, container_title, pub_year, and author.
May optionally include: volume, issue, page, publisher, url, and other fields.}

\item{key_prefix}{Optional character string to prepend to the citation key.
Default is an empty string.}
}
\value{
A list containing BibTeX fields and the raw BibTeX string, or NA if
required fields are missing. The list includes:
\itemize{
\item entry_type: The BibTeX entry type (article, book, incollection, etc.)
\item key: The citation key
\item author: Formatted author string
\item title: The publication title
\item year: Publication year
\item doi: Digital Object Identifier
\item url: URL to the publication
\item Additional fields based on publication type (journal, volume, pages, etc.)
\item raw_bibtex: The complete formatted BibTeX entry as a string
}
}
\description{
Generates a structured BibTeX entry from a row of publication data, typically
obtained from CrossRef or a similar source. The function validates required
fields, creates appropriate BibTeX entry types based on publication type, and
returns both a structured list of fields and a formatted BibTeX string.
}
\details{
This function maps CrossRef publication types to appropriate BibTeX entry types:
\itemize{
\item "journal-article" to "article"
\item "book-chapter" to "incollection"
\item "book" to "book"
\item "proceedings-article" to "inproceedings"
\item others default to "article"
}

The citation key is generated using the format: [key_prefix][last_name][year].
The function expects the author information in pub_row$author to be a list,
with the first element containing author data.

The function depends on helper functions:
\itemize{
\item format_bibtex_authors(): Formats author data into a BibTeX-compatible string
\item clean_text(): Cleans and escapes text for use in BibTeX entries
}
}
\examples{
\dontrun{
# create an input publication row
pub_data <- data.frame(
  doi = "10.1234/journal.example",
  title = "Example Research Paper",
  container_title = "Journal of Examples",
  pub_year = 2023,
  lead_author_last_name = "Smith",
  author = I(list(list(
    family = "Smith",
    given = "John"
  ))),
  volume = "45",
  issue = "2",
  page = "123-145",
  type = "journal-article",
  url = "https://doi.org/10.1234/journal.example"
)

# generate BibTeX with a prefix
bibtex_entry <- create_bibtex(pub_data, key_prefix = "ref:")

# access specific fields
bibtex_entry$key        # citation key
bibtex_entry$raw_bibtex # complete BibTeX string
}

}
