% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get_pubs.R
\name{get_pubs}
\alias{get_pubs}
\title{Retrieve publication metadata from CrossRef}
\usage{
get_pubs(
  query = NULL,
  filter = NULL,
  dois = NULL,
  total = 10000L,
  per_page = 1000L,
  preserve_404 = TRUE
)
}
\arguments{
\item{query}{Character string containing a search query. This can be used to
search across multiple fields. Default is NULL.}

\item{filter}{Named character vector of filters to apply to the CrossRef query.
See \code{\link[rcrossref]{cr_works}} for available filter options.
Default is NULL.}

\item{dois}{Character vector of DOIs to retrieve. If provided, query and filter
parameters are ignored. Default is NULL.}

\item{total}{Integer specifying the maximum number of records to retrieve.
Default is 10000. The function will stop when this many records have been
fetched or when no more records are available.}

\item{per_page}{Integer specifying how many records to fetch per API call when
using query or filter mode. Must be between 1 and 1000. Default is 1000
(the maximum allowed by CrossRef).}

\item{preserve_404}{Logical indicating whether to include placeholder rows for
DOIs that could not be retrieved. If TRUE (default), the result will contain
one row for each input DOI, with NA values for those not found. If FALSE,
unfound DOIs will be omitted from the result.}
}
\value{
A data frame containing publication metadata from CrossRef. When
using DOI mode with preserve_404 = TRUE, the result will include:
\itemize{
\item All standard CrossRef metadata fields
\item original_doi: The DOI as provided in the input
\item doi_retrieved: Logical indicating whether the DOI was successfully retrieved
}
}
\description{
Fetches publication metadata from the CrossRef API using either a search query,
filters, or a list of Digital Object Identifiers (DOIs). The function handles
pagination for search queries and processes DOIs individually to track
successes and failures.
}
\details{
This function provides two modes of operation:

\itemize{
\item Search mode: when query or filter parameters are provided, the function
performs a search using the CrossRef API and handles pagination to retrieve
multiple pages of results.

\item DOI mode: when a list of DOIs is provided, the function retrieves
metadata for each DOI individually. This allows for precise tracking of
which DOIs were successfully retrieved.
}

When using DOI mode, a small delay (0.1 seconds) is added between requests to
avoid overwhelming the CrossRef API.

For large DOI lists, the function displays progress messages every 10 DOIs.
}
\examples{
\dontrun{
# search for publications by keyword
climate_pubs <- get_pubs(query = "climate change", total = 500)

# search with filters
recent_ecology <- get_pubs(
  filter = c(
    from_pub_date = "2022-01-01",
    container_title = "ecology"
  ),
  total = 100
)

# retrieve specific publications by DOI
my_dois <- c(
  "10.1038/s41586-019-1401-2",
  "10.1126/science.aaf7671",
  "10.1111/invalid-doi"  # this DOI doesn't exist
)
my_pubs <- get_pubs(dois = my_dois)

# check which DOIs were not successfully retrieved
my_pubs[my_pubs$doi_retrieved == FALSE, ]

# get only successfully retrieved DOIs
found_pubs <- get_pubs(dois = my_dois, preserve_404 = FALSE)
}

}
\seealso{
\code{\link[rcrossref]{cr_works}} for details on the underlying CrossRef API
function and available filter options.
}
